<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Command Line Arguments Course | COMP1511</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
            background-color: #f8f7f2;
            color: #2c2c2c;
        }
        .concept-card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .back-button {
            background-color: #f8f7f2;
            color: #2c2c2c;
            border: 2px solid #e07a5f;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }
        .back-button:hover {
            background-color: #e07a5f;
            color: #ffffff;
            transform: translateY(-2px);
        }
        .chapter-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            color: #2c2c2c;
            margin: 2rem 0;
        }
        .summary-card {
            background: linear-gradient(135deg, #f4a261 0%, #e76f51 100%);
            color: #ffffff;
            border-radius: 0.5rem;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 8px 16px -4px rgb(0 0 0 / 0.1);
        }
        .interactive-button {
            background-color: #e07a5f;
            color: #ffffff;
            border: none;
            border-radius: 0.375rem;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            margin: 0.5rem;
        }
        .interactive-button:hover {
            background-color: #d06850;
            transform: translateY(-2px);
        }
        .interactive-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        .interactive-button.secondary {
            background-color: #f4a261;
        }
        .interactive-button.secondary:hover {
            background-color: #e3941f;
        }
        .terminal-container {
            background-color: #2c2c2c;
            border-radius: 0.375rem;
            padding: 1.5rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            color: #ffffff;
        }
        .terminal-input {
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            outline: none;
            width: 100%;
            padding: 0.5rem 0;
        }
        .terminal-prompt {
            color: #00ff00;
            font-weight: bold;
        }
        .arg-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background-color: #ffffff;
            border-radius: 0.375rem;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .arg-table th {
            background-color: #e07a5f;
            color: #ffffff;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        .arg-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            font-family: 'Courier New', monospace;
        }
        .arg-table tr:last-child td {
            border-bottom: none;
        }
        .arg-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .code-display {
            background-color: #2c2c2c;
            color: #ffffff;
            border-radius: 0.375rem;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        .code-highlight {
            background-color: #f4a261;
            color: #2c2c2c;
            padding: 2px 4px;
            border-radius: 2px;
            font-weight: bold;
        }
        .input-group {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        .input-field {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.375rem;
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            flex: 1;
            min-width: 200px;
        }
        .input-field:focus {
            outline: none;
            border-color: #e07a5f;
        }
        .status-message {
            background-color: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.375rem 0.375rem 0;
        }
        .error-message {
            background-color: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.375rem 0.375rem 0;
        }
        .canvas-container {
            background-color: #f8f7f2;
            border-radius: 0.375rem;
            padding: 2rem;
            margin: 1rem 0;
            min-height: 200px;
            border: 2px dashed #e07a5f;
        }
        .example-button {
            background-color: #8b8589;
            color: #ffffff;
            border: none;
            border-radius: 0.25rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            margin: 0.25rem;
        }
        .example-button:hover {
            background-color: #6b7280;
        }
        .execution-step {
            background-color: #f0fdf4;
            border-left: 4px solid #22c55e;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 0 0.375rem 0.375rem 0;
            display: none;
        }
        .execution-step.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .step-counter {
            display: inline-block;
            background-color: #22c55e;
            color: #ffffff;
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            text-align: center;
            line-height: 1.5rem;
            font-size: 0.75rem;
            font-weight: bold;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto px-4 py-8 md:py-12 max-w-6xl">
        
        <!-- Back to COMP1511 Button -->
        <a href="../comp1511.html" class="back-button">
            <span>â†</span>
            <span>Back to COMP1511</span>
        </a>

        <!-- Chapter Header -->
        <header class="text-center mb-8">
            <h1 class="chapter-title">å‘½ä»¤è¡Œå‚æ•°äº’åŠ¨è¯¾ç¨‹</h1>
            <p class="text-xl text-gray-600">Interactive Command Line Arguments Course</p>
        </header>

        <!-- Course Introduction -->
        <div class="summary-card">
            <h2 class="text-2xl font-bold mb-4">è¯¾ç¨‹ç›®æ ‡</h2>
            <p class="text-lg mb-4">
                é€šè¿‡äº¤äº’å¼æ¼”ç¤ºï¼Œæ·±å…¥ç†è§£å‘½ä»¤è¡Œå‚æ•°çš„è§£æè¿‡ç¨‹ã€‚æœ¬è¯¾ç¨‹åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div class="bg-white bg-opacity-20 p-4 rounded-lg">
                    <h3 class="text-lg font-bold mb-2">ğŸ“ æ¨¡å—ä¸€ï¼šå‚æ•°è§£æå™¨</h3>
                    <p>è¾“å…¥å‘½ä»¤ï¼Œå®æ—¶æŸ¥çœ‹ argc å’Œ argv çš„è§£æç»“æœ</p>
                </div>
                <div class="bg-white bg-opacity-20 p-4 rounded-lg">
                    <h3 class="text-lg font-bold mb-2">ğŸ” æ¨¡å—äºŒï¼šä»£ç æ¨¡æ‹Ÿå™¨</h3>
                    <p>å¯è§†åŒ–Cä»£ç æ‰§è¡Œæµç¨‹ï¼Œç†è§£å‚æ•°å¤„ç†é€»è¾‘</p>
                </div>
            </div>
        </div>

        <!-- Module 1: Command Parser -->
        <div class="concept-card">
            <h3 class="text-2xl font-bold text-[#e07a5f] mb-4">æ¨¡å—ä¸€ï¼šå‘½ä»¤è¡Œå‚æ•°è§£æå™¨</h3>
            
            <p class="text-lg mb-4">
                åœ¨ä¸‹é¢çš„æ¨¡æ‹Ÿç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•è¢«è§£æä¸º argc å’Œ argv æ•°ç»„ã€‚
            </p>

            <!-- Terminal Interface -->
            <div class="terminal-container">
                <div class="mb-4">
                    <span class="terminal-prompt">user@computer:~$ </span>
                    <input type="text" 
                           id="commandInput" 
                           class="terminal-input" 
                           placeholder="è¾“å…¥å‘½ä»¤ï¼Œä¾‹å¦‚: ./calculator 15 + 25"
                           onkeypress="handleEnterKey(event)">
                </div>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="parseCommand()" class="interactive-button">è§£æå‘½ä»¤</button>
                    <button onclick="clearCommand()" class="interactive-button secondary">æ¸…ç©º</button>
                </div>
            </div>

            <!-- Quick Examples -->
            <div class="bg-gray-50 p-4 rounded-lg mb-4">
                <h4 class="font-bold text-lg mb-3">å¿«é€Ÿç¤ºä¾‹ï¼š</h4>
                <div class="flex flex-wrap gap-2">
                    <button onclick="loadExample('./program')" class="example-button">ç®€å•ç¨‹åº</button>
                    <button onclick="loadExample('./calculator 15 + 25')" class="example-button">è®¡ç®—å™¨</button>
                    <button onclick="loadExample('./copy -v source.txt dest.txt')" class="example-button">æ–‡ä»¶å¤åˆ¶</button>
                    <button onclick="loadExample('./grep -n hello file.txt')" class="example-button">æ–‡æœ¬æœç´¢</button>
                    <button onclick="loadExample('./program -h --verbose -o output.txt input1.txt input2.txt')" class="example-button">å¤æ‚å‘½ä»¤</button>
                </div>
            </div>

            <!-- Results Display -->
            <div id="parseResults" class="canvas-container hidden">
                <div id="argcDisplay" class="mb-4"></div>
                <div id="argvTable"></div>
            </div>

            <!-- Status Messages -->
            <div id="parseStatus" class="hidden"></div>
        </div>

        <!-- Module 2: Code Simulator -->
        <div class="concept-card">
            <h3 class="text-2xl font-bold text-[#e07a5f] mb-4">æ¨¡å—äºŒï¼šCä»£ç æ‰§è¡Œæ¨¡æ‹Ÿå™¨</h3>
            
            <p class="text-lg mb-4">
                é€‰æ‹©ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œçœ‹çœ‹å®ƒå¦‚ä½•å¤„ç†å‘½ä»¤è¡Œå‚æ•°ã€‚ä»£ç æ‰§è¡Œè¿‡ç¨‹å°†é€æ­¥é«˜äº®æ˜¾ç¤ºã€‚
            </p>

            <!-- Program Selection -->
            <div class="bg-gray-50 p-4 rounded-lg mb-4">
                <h4 class="font-bold text-lg mb-3">é€‰æ‹©ç¤ºä¾‹ç¨‹åºï¼š</h4>
                <div class="input-group">
                    <select id="programSelect" class="input-field" style="flex: none; width: 200px;">
                        <option value="">é€‰æ‹©ç¨‹åº</option>
                        <option value="basic">åŸºæœ¬å‚æ•°éå†</option>
                        <option value="calculator">ç®€å•è®¡ç®—å™¨</option>
                        <option value="filetools">æ–‡ä»¶å·¥å…·</option>
                    </select>
                    <button onclick="loadProgram()" class="interactive-button">åŠ è½½ç¨‹åº</button>
                </div>

                <div class="input-group">
                    <label class="font-medium">æµ‹è¯•å‘½ä»¤ï¼š</label>
                    <input type="text" id="testCommand" class="input-field" placeholder="è¾“å…¥æµ‹è¯•å‘½ä»¤">
                    <button onclick="runSimulation()" class="interactive-button secondary" id="runBtn" disabled>è¿è¡Œæ¨¡æ‹Ÿ</button>
                </div>
            </div>

            <!-- Code Display -->
            <div id="codeDisplay" class="code-display hidden">
                <!-- Code will be inserted here -->
            </div>

            <!-- Execution Steps -->
            <div id="executionSteps" class="hidden">
                <h4 class="font-bold text-lg mb-3">æ‰§è¡Œæ­¥éª¤ï¼š</h4>
                <div id="stepContainer">
                    <!-- Steps will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Practice Exercises -->
        <div class="concept-card">
            <h3 class="text-2xl font-bold text-[#e07a5f] mb-4">å®è·µç»ƒä¹ </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-bold text-lg mb-2">ç»ƒä¹  1ï¼šåŸºç¡€è§£æ</h4>
                    <p class="text-sm mb-3 text-gray-600">å°è¯•è§£æä»¥ä¸‹å‘½ä»¤ï¼Œè§‚å¯Ÿå‚æ•°åˆ†å¸ƒï¼š</p>
                    <ul class="text-sm space-y-1 text-gray-700">
                        <li>â€¢ <code>./hello world</code></li>
                        <li>â€¢ <code>ls -la /home</code></li>
                        <li>â€¢ <code>gcc -o program main.c</code></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg mb-2">ç»ƒä¹  2ï¼šé€‰é¡¹å¤„ç†</h4>
                    <p class="text-sm mb-3 text-gray-600">è§‚å¯Ÿå¸¦é€‰é¡¹çš„å‘½ä»¤å¦‚ä½•è¢«è§£æï¼š</p>
                    <ul class="text-sm space-y-1 text-gray-700">
                        <li>â€¢ <code>./program -v --help</code></li>
                        <li>â€¢ <code>./copy -n 10 file.txt</code></li>
                        <li>â€¢ <code>./search -i -r pattern dir/</code></li>
                    </ul>
                </div>
            </div>

            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-bold text-blue-800 mb-2">ğŸ’¡ å­¦ä¹ è¦ç‚¹ï¼š</h4>
                <ul class="text-sm space-y-1 text-blue-700">
                    <li>â€¢ ç¨‹åºåæ€»æ˜¯ argv[0]ï¼Œå‚æ•°ä» argv[1] å¼€å§‹</li>
                    <li>â€¢ ç©ºæ ¼åˆ†éš”å‚æ•°ï¼Œå¼•å·å¯ä»¥ä¿æŒç©ºæ ¼</li>
                    <li>â€¢ é€‰é¡¹é€šå¸¸ä»¥ '-' å¼€å¤´ï¼Œé•¿é€‰é¡¹ä»¥ '--' å¼€å¤´</li>
                    <li>â€¢ argc åŒ…å«ç¨‹åºååœ¨å†…çš„æ€»å‚æ•°ä¸ªæ•°</li>
                </ul>
            </div>
        </div>

        <!-- Navigation -->
        <div class="concept-card text-center">
            <h3 class="text-xl font-bold text-[#e07a5f] mb-4">ç»§ç»­å­¦ä¹ </h3>
            <div class="space-y-4">
                <a href="./1511_cmd_args_notes.html" class="back-button inline-flex">
                    <span>ğŸ“–</span>
                    <span>å›åˆ°å‘½ä»¤è¡Œå‚æ•°ç¬”è®°</span>
                </a>
                <br>
                <a href="./1511_pointers_interactive.html" class="back-button inline-flex">
                    <span>ğŸš€</span>
                    <span>æŒ‡é’ˆäº’åŠ¨è¯¾ç¨‹</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        // Module 1: Command Parser
        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                parseCommand();
            }
        }

        function parseCommand() {
            const input = document.getElementById('commandInput').value.trim();
            
            if (!input) {
                showParseMessage('è¯·è¾“å…¥ä¸€ä¸ªå‘½ä»¤', 'error');
                return;
            }

            // Parse command into arguments (simple space splitting, no quote handling for now)
            const args = input.split(/\s+/).filter(arg => arg.length > 0);
            const argc = args.length;

            displayResults(argc, args);
            showParseMessage(`æˆåŠŸè§£æå‘½ä»¤ï¼Œå…± ${argc} ä¸ªå‚æ•°`, 'success');
        }

        function displayResults(argc, argv) {
            const resultsDiv = document.getElementById('parseResults');
            const argcDiv = document.getElementById('argcDisplay');
            const argvTableDiv = document.getElementById('argvTable');

            // Display argc
            argcDiv.innerHTML = `
                <div class="text-center p-4 bg-blue-100 rounded-lg">
                    <h4 class="text-xl font-bold text-blue-800">argc = ${argc}</h4>
                    <p class="text-blue-600">å‚æ•°æ€»æ•°ï¼ˆåŒ…æ‹¬ç¨‹åºåï¼‰</p>
                </div>
            `;

            // Create argv table
            let tableHTML = `
                <table class="arg-table">
                    <thead>
                        <tr>
                            <th>ç´¢å¼•</th>
                            <th>å˜é‡</th>
                            <th>å€¼</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            for (let i = 0; i < argv.length; i++) {
                const description = i === 0 ? 'ç¨‹åºå' : `ç¬¬${i}ä¸ªå‚æ•°`;
                tableHTML += `
                    <tr>
                        <td style="text-align: center; font-weight: bold;">${i}</td>
                        <td>argv[${i}]</td>
                        <td>"${argv[i]}"</td>
                        <td>${description}</td>
                    </tr>
                `;
            }

            tableHTML += `
                    </tbody>
                </table>
            `;

            argvTableDiv.innerHTML = tableHTML;
            resultsDiv.classList.remove('hidden');
        }

        function clearCommand() {
            document.getElementById('commandInput').value = '';
            document.getElementById('parseResults').classList.add('hidden');
            document.getElementById('parseStatus').classList.add('hidden');
        }

        function loadExample(command) {
            document.getElementById('commandInput').value = command;
            parseCommand();
        }

        function showParseMessage(message, type) {
            const statusDiv = document.getElementById('parseStatus');
            statusDiv.className = type === 'error' ? 'error-message' : 'status-message';
            statusDiv.innerHTML = `<p><strong>${type === 'error' ? 'é”™è¯¯' : 'ä¿¡æ¯'}:</strong> ${message}</p>`;
            statusDiv.classList.remove('hidden');
            
            setTimeout(() => {
                statusDiv.classList.add('hidden');
            }, 3000);
        }

        // Module 2: Code Simulator
        const programs = {
            basic: {
                name: 'åŸºæœ¬å‚æ•°éå†',
                code: `#include <stdio.h>

int main(int argc, char *argv[]) {
    printf("ç¨‹åºå: %s\\n", argv[0]);
    printf("å‚æ•°ä¸ªæ•°: %d\\n", argc - 1);
    
    for (int i = 1; i < argc; i++) {
        printf("å‚æ•° %d: %s\\n", i, argv[i]);
    }
    
    return 0;
}`,
                steps: [
                    'æ£€æŸ¥ argc çš„å€¼',
                    'æ‰“å°ç¨‹åºå argv[0]',
                    'è®¡ç®—å‚æ•°ä¸ªæ•° (argc - 1)',
                    'ä½¿ç”¨å¾ªç¯éå†æ‰€æœ‰å‚æ•°',
                    'æ‰“å°æ¯ä¸ªå‚æ•°çš„ç´¢å¼•å’Œå€¼'
                ]
            },
            calculator: {
                name: 'ç®€å•è®¡ç®—å™¨',
                code: `#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[]) {
    if (argc != 4) {
        printf("ç”¨æ³•: %s <æ•°å­—1> <æ“ä½œç¬¦> <æ•°å­—2>\\n", argv[0]);
        return 1;
    }
    
    double num1 = atof(argv[1]);
    char *operator = argv[2];
    double num2 = atof(argv[3]);
    double result;
    
    if (strcmp(operator, "+") == 0) {
        result = num1 + num2;
    } else if (strcmp(operator, "-") == 0) {
        result = num1 - num2;
    } else if (strcmp(operator, "*") == 0) {
        result = num1 * num2;
    } else if (strcmp(operator, "/") == 0) {
        if (num2 == 0) {
            printf("é”™è¯¯: é™¤æ•°ä¸èƒ½ä¸ºé›¶\\n");
            return 1;
        }
        result = num1 / num2;
    } else {
        printf("é”™è¯¯: ä¸æ”¯æŒçš„æ“ä½œç¬¦\\n");
        return 1;
    }
    
    printf("%.2f %s %.2f = %.2f\\n", num1, operator, num2, result);
    return 0;
}`,
                steps: [
                    'æ£€æŸ¥å‚æ•°ä¸ªæ•°æ˜¯å¦ä¸º4',
                    'è½¬æ¢ argv[1] ä¸ºç¬¬ä¸€ä¸ªæ•°å­—',
                    'è·å– argv[2] ä½œä¸ºæ“ä½œç¬¦',
                    'è½¬æ¢ argv[3] ä¸ºç¬¬äºŒä¸ªæ•°å­—',
                    'æ ¹æ®æ“ä½œç¬¦è¿›è¡Œè®¡ç®—',
                    'è¾“å‡ºè®¡ç®—ç»“æœ'
                ]
            },
            filetools: {
                name: 'æ–‡ä»¶å·¥å…·',
                code: `#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[]) {
    int verbose = 0;
    char *filename = NULL;
    
    for (int i = 1; i < argc; i++) {
        if (strcmp(argv[i], "-v") == 0) {
            verbose = 1;
        } else if (argv[i][0] != '-') {
            filename = argv[i];
        } else {
            printf("æœªçŸ¥é€‰é¡¹: %s\\n", argv[i]);
            return 1;
        }
    }
    
    if (filename == NULL) {
        printf("é”™è¯¯: è¯·æŒ‡å®šæ–‡ä»¶å\\n");
        return 1;
    }
    
    if (verbose) {
        printf("å¤„ç†æ–‡ä»¶: %s\\n", filename);
    }
    
    printf("æ–‡ä»¶å¤„ç†å®Œæˆ\\n");
    return 0;
}`,
                steps: [
                    'åˆå§‹åŒ–é€‰é¡¹å˜é‡',
                    'å¾ªç¯éå†æ‰€æœ‰å‚æ•°',
                    'æ£€æŸ¥æ˜¯å¦ä¸º -v é€‰é¡¹',
                    'æ£€æŸ¥æ˜¯å¦ä¸ºæ–‡ä»¶åå‚æ•°',
                    'éªŒè¯æ˜¯å¦æä¾›äº†æ–‡ä»¶å',
                    'æ ¹æ®é€‰é¡¹æ‰§è¡Œç›¸åº”æ“ä½œ'
                ]
            }
        };

        let currentProgram = null;
        let currentArgs = [];

        function loadProgram() {
            const programKey = document.getElementById('programSelect').value;
            
            if (!programKey) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªç¨‹åº');
                return;
            }

            currentProgram = programs[programKey];
            const codeDisplay = document.getElementById('codeDisplay');
            
            codeDisplay.innerHTML = `<pre>${escapeHtml(currentProgram.code)}</pre>`;
            codeDisplay.classList.remove('hidden');
            
            document.getElementById('runBtn').disabled = false;
            
            // Set example command
            const exampleCommands = {
                basic: './program hello world',
                calculator: './calculator 15 + 25',
                filetools: './filetools -v data.txt'
            };
            
            document.getElementById('testCommand').value = exampleCommands[programKey] || '';
        }

        function runSimulation() {
            const command = document.getElementById('testCommand').value.trim();
            
            if (!command) {
                alert('è¯·è¾“å…¥æµ‹è¯•å‘½ä»¤');
                return;
            }

            if (!currentProgram) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç¨‹åº');
                return;
            }

            currentArgs = command.split(/\s+/).filter(arg => arg.length > 0);
            showExecutionSteps();
        }

        function showExecutionSteps() {
            const stepsDiv = document.getElementById('executionSteps');
            const container = document.getElementById('stepContainer');
            
            // Clear previous steps
            container.innerHTML = '';
            
            // Create step elements
            currentProgram.steps.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'execution-step';
                stepDiv.id = `step-${index}`;
                
                const simulatedOutput = getSimulatedOutput(index);
                
                stepDiv.innerHTML = `
                    <div class="flex items-start">
                        <span class="step-counter">${index + 1}</span>
                        <div class="flex-1">
                            <h5 class="font-bold text-green-800">${step}</h5>
                            ${simulatedOutput ? `<div class="mt-2 p-2 bg-gray-100 rounded text-sm font-mono">${simulatedOutput}</div>` : ''}
                        </div>
                    </div>
                `;
                
                container.appendChild(stepDiv);
            });
            
            stepsDiv.classList.remove('hidden');
            
            // Animate steps
            animateSteps();
        }

        function animateSteps() {
            const steps = document.querySelectorAll('.execution-step');
            
            steps.forEach((step, index) => {
                setTimeout(() => {
                    step.classList.add('active');
                }, index * 800);
            });
        }

        function getSimulatedOutput(stepIndex) {
            if (!currentArgs.length) return null;
            
            const programKey = document.getElementById('programSelect').value;
            const argc = currentArgs.length;
            
            switch (programKey) {
                case 'basic':
                    switch (stepIndex) {
                        case 0: return `argc = ${argc}`;
                        case 1: return `ç¨‹åºå: ${currentArgs[0]}`;
                        case 2: return `å‚æ•°ä¸ªæ•°: ${argc - 1}`;
                        case 3: return `å¼€å§‹å¾ªç¯ (i = 1; i < ${argc})`;
                        case 4: 
                            let output = '';
                            for (let i = 1; i < argc; i++) {
                                output += `å‚æ•° ${i}: ${currentArgs[i]}\n`;
                            }
                            return output.trim();
                    }
                    break;
                    
                case 'calculator':
                    switch (stepIndex) {
                        case 0: return argc === 4 ? 'å‚æ•°ä¸ªæ•°æ­£ç¡®' : `é”™è¯¯: éœ€è¦4ä¸ªå‚æ•°ï¼Œå®é™…${argc}ä¸ª`;
                        case 1: return argc > 1 ? `num1 = ${currentArgs[1]}` : 'ç¼ºå°‘ç¬¬ä¸€ä¸ªæ•°å­—';
                        case 2: return argc > 2 ? `operator = "${currentArgs[2]}"` : 'ç¼ºå°‘æ“ä½œç¬¦';
                        case 3: return argc > 3 ? `num2 = ${currentArgs[3]}` : 'ç¼ºå°‘ç¬¬äºŒä¸ªæ•°å­—';
                        case 4: 
                            if (argc === 4) {
                                const op = currentArgs[2];
                                if (['+', '-', '*', '/'].includes(op)) {
                                    return `æ‰§è¡Œ ${op} è¿ç®—`;
                                } else {
                                    return `é”™è¯¯: ä¸æ”¯æŒçš„æ“ä½œç¬¦ "${op}"`;
                                }
                            }
                            return 'æ— æ³•è®¡ç®—';
                        case 5:
                            if (argc === 4 && ['+', '-', '*', '/'].includes(currentArgs[2])) {
                                return `è¾“å‡ºè®¡ç®—ç»“æœ`;
                            }
                            return 'æ— è¾“å‡º';
                    }
                    break;
                    
                case 'filetools':
                    switch (stepIndex) {
                        case 0: return 'verbose = 0, filename = NULL';
                        case 1: return `å¾ªç¯éå† ${argc - 1} ä¸ªå‚æ•°`;
                        case 2: 
                            const hasVerbose = currentArgs.includes('-v');
                            return hasVerbose ? 'å‘ç° -v é€‰é¡¹ï¼Œè®¾ç½® verbose = 1' : 'æœªå‘ç° -v é€‰é¡¹';
                        case 3:
                            const filename = currentArgs.find(arg => !arg.startsWith('-') && arg !== currentArgs[0]);
                            return filename ? `è®¾ç½® filename = "${filename}"` : 'æœªå‘ç°æ–‡ä»¶åå‚æ•°';
                        case 4:
                            const hasFile = currentArgs.find(arg => !arg.startsWith('-') && arg !== currentArgs[0]);
                            return hasFile ? 'æ–‡ä»¶åéªŒè¯é€šè¿‡' : 'é”™è¯¯: è¯·æŒ‡å®šæ–‡ä»¶å';
                        case 5:
                            return 'æ‰§è¡Œæ–‡ä»¶å¤„ç†æ“ä½œ';
                    }
                    break;
            }
            
            return null;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set focus to command input
            document.getElementById('commandInput').focus();
        });
    </script>
</body>
</html> 